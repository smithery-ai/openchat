{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "smithery-tool-search",
  "title": "Smithery Tool Search",
  "description": "A component for searching available tools across connected MCP servers.",
  "dependencies": [
    "@smithery/api",
    "@tanstack/react-query",
    "lucide-react"
  ],
  "registryDependencies": [
    "avatar",
    "card",
    "empty",
    "input",
    "separator",
    "spinner",
    "use-debounce",
    "smithery-server-search"
  ],
  "files": [
    {
      "path": "registry/new-york/smithery/tool-search.tsx",
      "content": "\"use client\";\n\nimport Smithery from \"@smithery/api\";\nimport type { ToolSearchResponse } from \"@smithery/api/resources/beta/connect/tools.mjs\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { WrenchIcon } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { useDebounce } from \"@/hooks/use-debounce\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Empty, EmptyDescription, EmptyHeader, EmptyTitle } from \"@/components/ui/empty\";\nimport { Input } from \"@/components/ui/input\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Spinner } from \"@/components/ui/spinner\";\nimport { ServerSearch } from \"@/registry/new-york/smithery/server-search\";\n\nasync function getDefaultNamespace(client: Smithery) {\n\tconst namespaces = await client.namespaces.list();\n\tif (namespaces.namespaces.length === 0) {\n\t\tthrow new Error(\"No namespaces found\");\n\t}\n\treturn namespaces.namespaces[0].name;\n}\n\nconst getSmitheryClient = (token: string) => {\n\treturn new Smithery({\n\t\tapiKey: token,\n\t\tbaseURL: process.env.NEXT_PUBLIC_SMITHERY_API_URL,\n\t});\n};\n\ntype ToolCardProps = {\n\ttool: ToolSearchResponse.Tool;\n};\n\nconst ToolCard = ({ tool }: ToolCardProps) => {\n\tconst toolName = tool.tool.name;\n\tconst toolDescription = tool.tool.description;\n\tconst serverUrl = tool.serverUrl;\n\tconst inputSchema = tool.tool.inputSchema;\n\n\treturn (\n\t\t<Card className=\"border-none shadow-none\">\n\t\t\t<CardContent className=\"flex items-center gap-4\">\n\t\t\t\t<Avatar className=\"h-10 w-10 rounded-md\">\n\t\t\t\t\t<AvatarFallback className=\"rounded-md bg-muted\">\n\t\t\t\t\t\t<WrenchIcon className=\"h-5 w-5 text-muted-foreground\" />\n\t\t\t\t\t</AvatarFallback>\n\t\t\t\t</Avatar>\n\t\t\t\t<div className=\"flex-1 min-w-0\">\n\t\t\t\t\t<h3 className=\"font-medium truncate\">{toolName}</h3>\n\t\t\t\t\t<p className=\"text-muted-foreground text-xs truncate\">{serverUrl}</p>\n\t\t\t\t\t{toolDescription && (\n\t\t\t\t\t\t<p className=\"text-muted-foreground text-xs truncate\">\n\t\t\t\t\t\t\t{toolDescription}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t\t{inputSchema && Object.keys(inputSchema).length > 0 && (\n\t\t\t\t\t\t<details className=\"mt-2\">\n\t\t\t\t\t\t\t<summary className=\"text-xs text-muted-foreground cursor-pointer hover:text-foreground\">\n\t\t\t\t\t\t\t\tView parameters\n\t\t\t\t\t\t\t</summary>\n\t\t\t\t\t\t\t<pre className=\"mt-2 text-xs bg-muted/50 p-2 rounded overflow-x-auto\">\n\t\t\t\t\t\t\t\t{JSON.stringify(inputSchema, null, 2)}\n\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t</details>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</CardContent>\n\t\t</Card>\n\t);\n};\n\nexport const ToolSearch = ({ token }: { token?: string }) => {\n\tconst [query, setQuery] = useState(\"\");\n\tconst debouncedQuery = useDebounce(query, 300);\n\n\tconst { data, isLoading, error } = useQuery({\n\t\tqueryKey: [\"tools\", token, debouncedQuery],\n\t\tqueryFn: async () => {\n\t\t\tif (!token) {\n\t\t\t\tthrow new Error(\"API token is required\");\n\t\t\t}\n\t\t\tconst client = getSmitheryClient(token);\n\t\t\tconsole.log(\"searching\", debouncedQuery);\n\t\t\tconst namespace = await getDefaultNamespace(client);\n\t\t\tconst tools = await client.beta.connect.tools.search(\n\t\t\t\tnamespace,\n\t\t\t\tdebouncedQuery.length > 0 ? { q: debouncedQuery } : {},\n\t\t\t);\n\t\t\tconsole.log(`tools for ${debouncedQuery}`, tools);\n\t\t\treturn tools;\n\t\t},\n\t\tenabled: !!token,\n\t});\n\n\treturn (\n\t\t<div className=\"max-w-md mx-auto\">\n\t\t\t<div className=\"mb-4\">\n\t\t\t\t<Input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={query}\n\t\t\t\t\tonChange={(e) => setQuery(e.target.value)}\n\t\t\t\t\tplaceholder=\"Search for a tool\"\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{/* Loading State */}\n\t\t\t{isLoading && (\n\t\t\t\t<div className=\"flex items-center gap-2 text-muted-foreground py-4\">\n\t\t\t\t\t<Spinner />\n\t\t\t\t\t<span>Searching tools...</span>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Error State */}\n\t\t\t{error && (\n\t\t\t\t<div className=\"rounded-md bg-destructive/10 p-4\">\n\t\t\t\t\t<p className=\"text-destructive text-sm\">Error: {error.message}</p>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{/* Empty State */}\n\t\t\t{!isLoading && !error && data?.tools && data.tools.length === 0 && (\n\t\t\t\t<Empty>\n\t\t\t\t\t<EmptyHeader>\n\t\t\t\t\t\t<EmptyTitle>No tools found</EmptyTitle>\n\t\t\t\t\t\t<EmptyDescription>\n\t\t\t\t\t\t\tTry a different search term or add a server below\n\t\t\t\t\t\t</EmptyDescription>\n\t\t\t\t\t</EmptyHeader>\n\t\t\t\t</Empty>\n\t\t\t)}\n\n\t\t\t{/* Unified scrollable container for all results */}\n\t\t\t{!isLoading && !error && (\n\t\t\t\t<div className=\"space-y-4 overflow-auto max-h-[500px]\">\n\t\t\t\t\t{/* Tool Results */}\n\t\t\t\t\t{data?.tools && data.tools.length > 0 && (\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t{data.tools.map((tool: ToolSearchResponse.Tool) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tkey={`${tool.serverUrl}-${tool.connectionId}-${tool.tool.name}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ToolCard tool={tool} />\n\t\t\t\t\t\t\t\t\t<Separator />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{/* Server Search Section - shows automatically with same query */}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h2 className=\"text-lg font-semibold\">Explore Servers</h2>\n\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mt-1\">\n\t\t\t\t\t\t\t\tIf the tool you want isn't showing up, try adding another server\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ServerSearch token={token} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n",
      "type": "registry:component",
      "target": "components/smithery/tool-search.tsx"
    }
  ],
  "type": "registry:block"
}